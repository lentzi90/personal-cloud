OC_URL=https://opencloud.jern.fi
# do not use SSL between ingress controller and OpenCloud
PROXY_TLS=false
# INSECURE: needed if using self generated certificates
OC_INSECURE=false
PROXY_CSP_CONFIG_FILE_LOCATION=/etc/opencloud/csp.yaml
#OC_CORS_ALLOW_ORIGINS=https://keycloak.jern.fi
OC_CORS_ALLOW_ORIGINS='*'
WEB_OIDC_METADATA_URL=https://keycloak.jern.fi/auth/realms/jern.fi/.well-known/openid-configuration
OC_CORS_ALLOW_HEADERS=Access-Control-Allow-Origin,Authorization,Origin,Content-Type,Accept,X-Requested-With,X-Request-Id,Cache-Control
# OIDC configuration start
OC_OIDC_ISSUER=https://keycloak.jern.fi/auth/realms/jern.fi
OC_ADMIN_USER_ID=lennart
OC_EXCLUDE_RUN_SERVICES=idp
PROXY_OIDC_REWRITE_WELLKNOWN=true
WEB_OPTION_ACCOUNT_EDIT_LINK_HREF=https://keycloak.jern.fi/realms/jern.fi/account
# Set user roles through OIDC claims
PROXY_ROLE_ASSIGNMENT_DRIVER=oidc
PROXY_ROLE_ASSIGNMENT_OIDC_CLAIM=opencloudRole
PROXY_USER_OIDC_CLAIM=sub
PROXY_AUTOPROVISION_CLAIM_USERNAME=sub
PROXY_USER_CS3_CLAIM=username
SETTINGS_SETUP_DEFAULT_ASSIGNMENTS=false
GRAPH_ASSIGN_DEFAULT_USER_ROLE=false
GRAPH_USERNAME_MATCH=none
# OIDC configuration end
