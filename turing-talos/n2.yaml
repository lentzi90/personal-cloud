machine:
  kubelet:
    nodeIP:
      validSubnets:
      - 192.168.1.21/32
    extraArgs:
      rotate-server-certificates: "true"
    extraMounts:
    - destination: /var/lib/longhorn
      type: bind
      source: /var/lib/longhorn
      options:
      - bind
      - rshared
      - rw
  install:
    disk: /dev/mcblk0
    image: factory.talos.dev/installer/85f683902139269fbc5a7f64ea94a694d31e0b3d94347a225223fcbd042083ae:v1.12.0
  features:
    stableHostname: false
  files:
  # Containerd config for spegel
  - path: /etc/cri/conf.d/20-customization.part
    op: create
    content: |
      [plugins."io.containerd.cri.v1.images"]
        discard_unpacked_layers = false
---
apiVersion: v1alpha1
kind: HostnameConfig
hostname: turing2
---
apiVersion: v1alpha1
kind: LinkAliasConfig
name: lan0
selector:
  match: link.type == 1
---
apiVersion: v1alpha1
kind: LinkConfig
name: lan0
addresses:
- address: 192.168.1.21/24
routes:
- gateway: 192.168.1.1
---
apiVersion: v1alpha1
kind: ResolverConfig
nameservers:
- address: 86.54.11.1
- address: 86.54.11.201
